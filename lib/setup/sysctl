#!/bin/sh

. _LIBRARY_PATH_/_APPLICATION_NAME_/setup/libraries/include
. _LIBRARY_PATH_/_APPLICATION_NAME_/setup/libraries/key-value

_ORIGINAL_IFS=$IFS
IFS=$'\n'

_MODULE=sysctl
_TYPE=d

_target_file $_ROOT/etc/sysctl.conf

for _SYSCTL_PATH in $(_LIBRARY_PATH_/_APPLICATION_NAME_/find/patches\
  |xargs -L 1 -I _PATCH_ find _PATCH_ -type $_TYPE\
  |/usr/local/bin/grep -P "\\.patch/(${_MODULE}$|.*\\.${_MODULE}$)")
do
  _key_value $_SYSCTL_PATH
  _HAS_RUN=1
done

IFS=$_ORIGINAL_IFS

_check_run
